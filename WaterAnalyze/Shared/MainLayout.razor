@using Data
@inherits LayoutComponentBase
@inject CurrentUser CurrentUser
@inject NavigationManager Navigation
<MudThemeProvider Theme="_theme"/>
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar >
        <MudContainer>
            <MudButton  OnClick="ToLogOut">ClearWater</MudButton>
        </MudContainer>
        <MudContainer Style="display: flex; justify-content: right;">
            @if (CurrentUser.CurrentUserData != null)
            {
                <MudButton  Href="/sourceList">Направления</MudButton>                            
                <MudButton  Href="/monitoring">Мониторинг</MudButton>
                if (CurrentUser.CurrentUserData.RoleId == 1)
                {
                    <MudButton Href="/workerList">Сотрудники</MudButton>
                }
                else if (CurrentUser.CurrentUserData.RoleId == 2)
                {
                    <MudButton Href="/analyzeList">Анализы</MudButton>
                }
            }
            else
            {
                <MudButton  OnClick="ToAccount">Аккаунт</MudButton>
            }
        </MudContainer>
    </MudAppBar>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code {
    private readonly MudTheme _theme = new()
        {
            Palette = new PaletteLight
            {
                Primary = "#4f97c2",
                // Secondary = "#7C7C7C",
                AppbarBackground = "#FFFFFF",
                AppbarText = "#000000",
                //TableHover = "#C7E8CA",
                //TextPrimary = "#212121",
                //TextSecondary = "#757575",
                //PrimaryDarken = "#303F9F",
                //PrimaryLighten = "#C5CAE9",
                //Divider = "#BDBDBD"
            }
        };

    public void ToAccount()
    {
        if (CurrentUser.CurrentUserData != null)
        {

        }
        else
        {
            Navigation.NavigateTo($"/autho");
        }
    }

    public void ToLogOut()
    {
        CurrentUser.CurrentUserData = null;
        Navigation.NavigateTo($"/");
    }

}