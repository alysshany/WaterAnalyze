@using Data
@inherits LayoutComponentBase
@inject CurrentUser CurrentUser
@inject NavigationManager Navigation
<MudThemeProvider Theme="_theme"/>
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar >
        <MudContainer>
            <MudButton Href="/">ClearWater</MudButton>
        </MudContainer>
        <MudContainer>
            <MudButton Href="/sourceList">Направления</MudButton>
            <MudButton Href="/monitoring">Мониторинг</MudButton>
            <MudButton OnClick="ToAccount">Аккаунт</MudButton>
            @if (CurrentUser.CurrentUserData != null)
            {
                if (CurrentUser.CurrentUserData.RoleId == 1)
                {
                    <MudButton Href="/analyzeList">Сотрудники</MudButton>
                }
                else if (CurrentUser.CurrentUserData.RoleId == 2)
                {
                    <MudButton Href="/analyzeList">Анализы</MudButton>
                }
            }
        </MudContainer>
    </MudAppBar>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code {
    private readonly MudTheme _theme = new()
        {
            Palette = new PaletteLight
            {
                //Primary = "#3F51B5",
                //Secondary = "#4CAF50",
                AppbarBackground = "#FFFFFF",
                AppbarText = "#000000",
                //TableHover = "#C7E8CA",
                //TextPrimary = "#212121",
                //TextSecondary = "#757575",
                //PrimaryDarken = "#303F9F",
                //PrimaryLighten = "#C5CAE9",
                //Divider = "#BDBDBD"
            }
        };

    public void ToAccount()
    {
        if (CurrentUser.CurrentUserData != null)
        {

        }
        else
        {
            Navigation.NavigateTo($"/autho");
        }
    }

}